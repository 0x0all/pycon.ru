<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>{{ title }}</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
      <script src="/js/html5shiv.js"></script>
      <script src="/js/css3-mediaqueries.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/normalize.css">
    <base target="_blank">

    {% if DEBUG %}
      <link rel="stylesheet/less" type="text/css" href="/less/layout.less" />
      <link rel="stylesheet/less" type="text/css" href="/less/styles.less" />
      <script src="/js/less.js" type="text/javascript"></script>
    {% else %}
      <link rel="stylesheet" href="/css/styles.css">
    {% endif %}

    {% block head_extra %}{% endblock %}
  </head>
  <body>
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter18910277 = new Ya.Metrika({id:18910277,
                        webvisor:true,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true});
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript><div><img src="//mc.yandex.ru/watch/18910277" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
    
    <a href="https://github.com/pyconru/pycon.ru" class="github-ribbon">Fork me on GitHub</a>

    <div class="container">
      <header>
        <a href="{{ url_for('about') }}" target="_self">
          <h2>
            <span class="month">{{ _('February') }}</span> <span class="days">24&ndash;25</span>
          </h2>

          <h1>
            PyCon Russia <span class="year">2013</span>
          </h1>
        </a>
        
        <section class="language-selector">
          <a href="{{ url_for(PAGE_NAME, language='ru') }}" target="_self" class="ru{% if LANGUAGE == 'ru' %} active{% endif %}">Рус</a>
          <a href="{{ url_for(PAGE_NAME, language='en') }}" target="_self" class="en{% if LANGUAGE == 'en' %} active{% endif %}">Eng</a>
        </section>

        <a href="{{ url_for('about') }}" target="_self">
          <img src="/img/logo.png" class="logo">
        </a>
      </header>

      {% set first_level_nav = [
        ('about', 'About'),
        ('organizers', 'Organizers'),
        ('schedule', 'Schedule'),
        ('speakers', 'Speakers'),
        ('partners', 'Partners'),
        ('register', 'Register'),
      ] -%}

      {% set second_level_nav = {
        'schedule': [
          ('talks', 'Talks'),
          ('schedule', 'Schedule'),
          ('call', 'Call for papers'),
        ],
      } -%}

      {% set active_page = PAGE_NAME -%} 

      <nav class="main">
        <ul>
          {% for (page, label) in first_level_nav %}
          
          {% set subpages = second_level_nav.get(page) -%} 
          <li class="{% if subpages %}expandable{% endif %}">
            {% if page == active_page -%}
              <span class="{% if page == 'register' %}emphasized{% endif %} {% if loop.last %}last{% endif %} active">
                {{ _(label) }}
              </span>
            {% else -%}
              <a class="{% if page == 'register' %}emphasized{% endif %} {% if loop.last %}last{% endif %} " href="{{ url_for(page) }}" target="_self">
                {{ _(label) }}
              </a>
            {% endif -%}

            {% if subpages %}
              <ul>
                {% for subpage, subpage_label in subpages %}
                <li>
                  <a href="{{ url_for(page + '/' + subpage) }}">{{ _(subpage_label) }}</a>
                </li>
                {% endfor %}
              </ul>
            {% endif %}
          {% endfor %}
          <li>
        </ul>
      </nav>

      <article id="{{ PAGE_NAME }}">
        {% block content %}
        {% endblock %}
      </article>

      <div class="push"></div>
    </div>
      
    <footer>
      <nav>
        {% for name, label in first_level_nav %}
          <a class="{% if name == 'register' %}emphasized{% endif %} {% if name == active_page %}active{% endif %} {% if loop.last %}last{% endif %}" href="{{ url_for(name) }}" target="_self">
            {{ _(label) }}
          </a>
        {% endfor %}
      </nav>

      <section class="social-buttons">
        <a href="http://www.facebook.com/ruPycon" class="facebook">Facebook</a>
        <a href="http://vk.com/pyconru" class="vk">Vk</a>
        <a href="https://twitter.com/PyConRu" class="twitter">Twitter</a>
      </section>
    </footer>

    <script>
        var _gaq=[['_setAccount','UA-37098336-1'],['_trackPageview']];
        (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
        g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g,s)}(document,'script'));
    </script>

    <script>
      (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter18910277 = new Ya.Metrika({id:18910277, webvisor:true, clickmap:true, trackLinks:true, accurateTrackBounce:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");
    </script>
  </body>
</html>
